import"./modulepreload-polyfill.b7f2da20.js";const r=document.getElementById("startButton");r.addEventListener("click",async()=>{console.log("clicked!");let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.scripting.executeScript({target:{tabId:e.id},function:a}),chrome.desktopCapture.chooseDesktopMedia(["tab"],e,async t=>{console.log("started desktopCapture OK",t),t&&t.length,chrome.tabs.sendMessage(e.id,{streamId:t},function(o){})})});function a(){console.log("startCapture"),chrome.runtime.onMessage.addListener(async e=>{console.log("got message!",e);const{streamId:t}=e;try{const o=await navigator.mediaDevices.getUserMedia({video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t}}});console.log("got stream OK:",o)}catch(o){console.error("error getting stream:",o)}})}
